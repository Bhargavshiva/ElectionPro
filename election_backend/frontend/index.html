<!-- 
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Election Application for State Assembly</title>
  <link rel="stylesheet" href="css/style.css" /> 
  <style>
    /* Reset some margins */
    body, html {
      margin: 0;
      padding: 0;
    }

    header {
      position: fixed; /* Make header stick to top */
      top: 0;
      left: 0;
      width: 100%;
      background-color: #0044cc;
      color: white;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      z-index: 1000; /* Keeps header above other content */
    }

    header img {
      height: 40px;  /* Adjust logo size */
      width: auto;
    }

    header h1 {
      margin: 0;
      font-size: 22px;
    }

    main {
      margin-top: 80px; /* Prevent content from hiding under header */
      padding: 20px;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <img src="/gradiouslogo.png" alt="logo">
      <h1 class="logo">Election Application for State Assembly</h1><br>
      <nav class="navbar">
        <a href="index.html">Home</a>
        <a href="admin-login.html">Admin Login</a>
        <a href="login.html">Voter Login</a>
        <a href="admin-dashboard.html">Admin Dashboard</a>
        <!-- <a href="voter-register.html">Register as Voter</a> -->
        <!-- <a href="result.html">Results</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="project-description">
      <h1>About the Project</h1><br>
      <p style="font-weight: bold;">
        The State Assembly Election Web Application is a comprehensive platform that enables secure voter registration, candidate management,
        live election tracking, and result monitoring. It provides features such as login authentication, countdown timer, admin controls, 
        and statistical dashboards to support fair and transparent elections.
      </p>
    </div>

    <!-- Countdown -->
    <!-- <section class="election-status">
      <h2>üó≥Ô∏è Election Countdown</h2>
      <p id="countdown">Loading...</p>
    </section>

    <!-- Stats -->
    <!-- <section class="stats">
      <div class="stat-box">
        <strong>Total Voters</strong>
        <span id="totalVoters">Loading...</span>
      </div>
      <div class="stat-box">
        <strong>Total Candidates</strong>
        <span id="totalCandidates">Loading...</span>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Election Commission | All Rights Reserved</p>
  </footer> -->

  <!-- <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const totalVotersEl = document.getElementById("totalVoters");
      const totalCandidatesEl = document.getElementById("totalCandidates");
      const countdownEl = document.getElementById("countdown");

      try {
        // Fetch Voters
        const votersRes = await fetch("http://localhost:5000/api/participants"); 
        const votersData = await votersRes.json();
        totalVotersEl.textContent = votersData.length;

        // Fetch Candidates
        const candidatesRes = await fetch("http://localhost:5000/api/candidates"); 
        const candidatesData = await candidatesRes.json();
        totalCandidatesEl.textContent = candidatesData.length;

        // Fetch Elections (for countdown)
        const electionRes = await fetch("http://localhost:5000/api/elections");
        const electionData = await electionRes.json();

        if (electionData.length === 0) {
          countdownEl.textContent = "No election date set.";
          return;
        }

        // Assuming latest upcoming election
        const latestElection = electionData[0];
        const electionDate = new Date(latestElection.date);

        function updateCountdown() {
          const now = new Date();
          const timeDiff = electionDate - now;

          if (timeDiff <= 0) {
            countdownEl.textContent = "üó≥Ô∏è Election Day!";
            return;
          }

          const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          const hours = Math.floor((timeDiff / (1000 * 60 * 60)) % 24);
          const minutes = Math.floor((timeDiff / (1000 * 60)) % 60);
          const seconds = Math.floor((timeDiff / 1000) % 60);

          countdownEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s remaining`;
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

      } catch (error) {
        console.error("Error fetching data:", error);
        totalVotersEl.textContent = "Error";
        totalCandidatesEl.textContent = "Error";
        countdownEl.textContent = "Error loading election date.";
      }
    });
  </script>
</body>
</html>   -->


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Election Application for State Assembly</title>
  <link rel="stylesheet" href="css/style.css" /> 
  <style>
    body, html {
      margin: 0;
      padding: 0;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: #0044cc;
      color: white;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    header img {
      height: 40px;
      width: auto;
    }

    header h1 {
      margin: 0;
      font-size: 22px;
    }

    main {
      margin-top: 80px;
      padding: 20px;
    }

    nav a.disabled {
      pointer-events: none; /* disable clicking */
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <img src="/gradiouslogo.png" alt="logo">
      <h1 class="logo">Election Application for State Assembly</h1><br>
      <nav class="navbar">
        <a href="index.html">Home</a>
        <a href="admin-login.html">Admin Login</a>
        <a id="voterLoginLink" href="login.html">Voter Login</a>
        <a href="admin-dashboard.html">Admin Dashboard</a>
        <a href="result.html">Results</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="project-description">
      <h1>About the Project</h1><br>
      <p style="font-weight: bold;">
        The State Assembly Election Web Application is a comprehensive platform that enables secure voter registration, candidate management,
        live election tracking, and result monitoring. It provides features such as login authentication, countdown timer, admin controls, 
        and statistical dashboards to support fair and transparent elections.
      </p>
    </div>

    <!-- Countdown -->
    <section class="election-status">
      <h2>üó≥Ô∏è Election Countdown</h2>
      <p id="countdown">Loading...</p>
    </section>

    <!-- Stats -->
    <section class="stats">
      <div class="stat-box">
        <strong>Total Voters</strong>
        <span id="totalVoters">Loading...</span>
      </div>
      <div class="stat-box">
        <strong>Total Candidates</strong>
        <span id="totalCandidates">Loading...</span>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Election Commission | All Rights Reserved</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const totalVotersEl = document.getElementById("totalVoters");
      const totalCandidatesEl = document.getElementById("totalCandidates");
      const countdownEl = document.getElementById("countdown");
      const voterLoginLink = document.getElementById("voterLoginLink");

      try {
        // Fetch Voters
        const votersRes = await fetch("http://localhost:5000/api/participants"); 
        const votersData = await votersRes.json();
        totalVotersEl.textContent = votersData.length;

        // Fetch Candidates
        const candidatesRes = await fetch("http://localhost:5000/api/candidates"); 
        const candidatesData = await candidatesRes.json();
        totalCandidatesEl.textContent = candidatesData.length;

        // Fetch Elections (for countdown)
        const electionRes = await fetch("http://localhost:5000/api/elections");
        const electionData = await electionRes.json();

        if (electionData.length === 0) {
          countdownEl.textContent = "No election date set.";
          voterLoginLink.classList.add("disabled"); // disable login if no election
          return;
        }

        // Assuming latest upcoming election
        const latestElection = electionData[0];
        const electionDate = new Date(latestElection.date);

        function updateCountdown() {
          const now = new Date();
          const timeDiff = electionDate - now;

          if (timeDiff <= 0) {
            countdownEl.textContent = "üó≥Ô∏è Election Day! You can login and vote.";
            voterLoginLink.classList.remove("disabled"); // enable login
            return;
          }

          const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          const hours = Math.floor((timeDiff / (1000 * 60 * 60)) % 24);
          const minutes = Math.floor((timeDiff / (1000 * 60)) % 60);
          const seconds = Math.floor((timeDiff / 1000) % 60);

          countdownEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s remaining`;
          voterLoginLink.classList.add("disabled"); // disable login until countdown ends
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

      } catch (error) {
        console.error("Error fetching data:", error);
        totalVotersEl.textContent = "Error";
        totalCandidatesEl.textContent = "Error";
        countdownEl.textContent = "Error loading election date.";
        voterLoginLink.classList.add("disabled");
      }
    });
  </script>
</body>
</html>
